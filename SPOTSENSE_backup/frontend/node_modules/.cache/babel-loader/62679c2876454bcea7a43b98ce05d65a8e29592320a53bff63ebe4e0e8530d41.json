{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{MagnifyingGlassIcon}from'@heroicons/react/24/outline';// Sample suggestions for parking locations\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PARKING_SUGGESTIONS=[{id:'rcity_mall',name:'R-City Mall Parking',area:'Ghatkopar',highlighted:true},{id:'p1',name:'Nakshatra Mall Parking',area:'Dadar West'},{id:'p2',name:'Metro Station Parking',area:'Andheri East'},{id:'p3',name:'Downtown Secure Parking',area:'Powai'},{id:'p4',name:'Hospital Parking Zone',area:'Bandra'},{id:'p5',name:'R-City Mall Parking',area:'Ghatkopar'},{id:'p6',name:'Infiniti Mall Parking',area:'Malad West'},{id:'p7',name:'Phoenix Marketcity Parking',area:'Kurla West'},{id:'p8',name:'Viviana Mall Parking',area:'Thane West'}];const SearchBar=_ref=>{let{className=''}=_ref;const[searchQuery,setSearchQuery]=useState('');const[suggestions,setSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const suggestionsRef=useRef(null);const navigate=useNavigate();// Close suggestions when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(suggestionsRef.current&&!suggestionsRef.current.contains(event.target)){setShowSuggestions(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Filter suggestions based on search query\nuseEffect(()=>{if(searchQuery.trim()===''){setSuggestions([]);return;}const query=searchQuery.toLowerCase();// Special handling for \"rcity\" or \"r-city\" to prioritize R-City Mall\nif(query.includes('rcity')||query.includes('r-city')){const rcitySuggestions=PARKING_SUGGESTIONS.filter(suggestion=>suggestion.name.toLowerCase().includes('r-city'));setSuggestions(rcitySuggestions);return;}const filteredSuggestions=PARKING_SUGGESTIONS.filter(suggestion=>suggestion.name.toLowerCase().includes(query)||suggestion.area.toLowerCase().includes(query));// Sort suggestions to prioritize exact matches\nfilteredSuggestions.sort((a,b)=>{const aNameMatch=a.name.toLowerCase().includes(query);const bNameMatch=b.name.toLowerCase().includes(query);if(aNameMatch&&!bNameMatch)return-1;if(!aNameMatch&&bNameMatch)return 1;return 0;});setSuggestions(filteredSuggestions);},[searchQuery]);const handleSubmit=e=>{e.preventDefault();performSearch();};const performSearch=parkingId=>{// If a specific parking ID is provided, go directly to that parking\nif(parkingId){navigate(`/parking/${parkingId}`);setSearchQuery('');setShowSuggestions(false);return;}// Special case for R-City Mall\nif(searchQuery.toLowerCase().includes('rcity')||searchQuery.toLowerCase().includes('r-city')){navigate('/parking/rcity_mall');setSearchQuery('');setShowSuggestions(false);return;}// Otherwise, go to the nearby malls page with the search query\nif(searchQuery.trim()){navigate(`/nearby-malls?q=${encodeURIComponent(searchQuery.trim())}`);setSearchQuery('');setShowSuggestions(false);}else{// If search is empty, just go to the nearby malls page\nnavigate('/nearby-malls');}};const handleSuggestionClick=parkingId=>{performSearch(parkingId);};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full\",ref:suggestionsRef,children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:`flex items-center relative ${className}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Find nearest parking... (e.g. R-City Mall)\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setShowSuggestions(true);},onFocus:()=>setShowSuggestions(true),className:\"form-input pr-10 py-1.5 text-sm w-full\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"absolute right-2 text-gray-400 hover:text-gray-600\",\"aria-label\":\"Search\",children:/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5\"})})]}),showSuggestions&&suggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto\",children:/*#__PURE__*/_jsx(\"ul\",{children:suggestions.map(suggestion=>/*#__PURE__*/_jsxs(\"li\",{className:`px-4 py-2 hover:bg-yellow-50 cursor-pointer ${suggestion.highlighted?'bg-yellow-50':''}`,onClick:()=>handleSuggestionClick(suggestion.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:suggestion.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:suggestion.area})]},suggestion.id))})})]});};export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","MagnifyingGlassIcon","jsx","_jsx","jsxs","_jsxs","PARKING_SUGGESTIONS","id","name","area","highlighted","SearchBar","_ref","className","searchQuery","setSearchQuery","suggestions","setSuggestions","showSuggestions","setShowSuggestions","suggestionsRef","navigate","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","trim","query","toLowerCase","includes","rcitySuggestions","filter","suggestion","filteredSuggestions","sort","a","b","aNameMatch","bNameMatch","handleSubmit","e","preventDefault","performSearch","parkingId","encodeURIComponent","handleSuggestionClick","ref","children","onSubmit","type","placeholder","value","onChange","onFocus","length","map","onClick"],"sources":["C:/Users/Lenovo/Documents/APICODE/spotsense/frontend/src/components/common/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { MagnifyingGlassIcon } from '@heroicons/react/24/outline';\r\n\r\n// Sample suggestions for parking locations\r\nconst PARKING_SUGGESTIONS = [\r\n  { id: 'rcity_mall', name: 'R-City Mall Parking', area: 'Ghatkopar', highlighted: true },\r\n  { id: 'p1', name: 'Nakshatra Mall Parking', area: 'Dadar West' },\r\n  { id: 'p2', name: 'Metro Station Parking', area: 'Andheri East' },\r\n  { id: 'p3', name: 'Downtown Secure Parking', area: 'Powai' },\r\n  { id: 'p4', name: 'Hospital Parking Zone', area: 'Bandra' },\r\n  { id: 'p5', name: 'R-City Mall Parking', area: 'Ghatkopar' },\r\n  { id: 'p6', name: 'Infiniti Mall Parking', area: 'Malad West' },\r\n  { id: 'p7', name: 'Phoenix Marketcity Parking', area: 'Kurla West' },\r\n  { id: 'p8', name: 'Viviana Mall Parking', area: 'Thane West' }\r\n];\r\n\r\nconst SearchBar = ({ className = '' }) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const suggestionsRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Close suggestions when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (suggestionsRef.current && !suggestionsRef.current.contains(event.target)) {\r\n        setShowSuggestions(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  // Filter suggestions based on search query\r\n  useEffect(() => {\r\n    if (searchQuery.trim() === '') {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n    \r\n    const query = searchQuery.toLowerCase();\r\n    \r\n    // Special handling for \"rcity\" or \"r-city\" to prioritize R-City Mall\r\n    if (query.includes('rcity') || query.includes('r-city')) {\r\n      const rcitySuggestions = PARKING_SUGGESTIONS.filter(\r\n        suggestion => suggestion.name.toLowerCase().includes('r-city')\r\n      );\r\n      setSuggestions(rcitySuggestions);\r\n      return;\r\n    }\r\n    \r\n    const filteredSuggestions = PARKING_SUGGESTIONS.filter(\r\n      suggestion => \r\n        suggestion.name.toLowerCase().includes(query) || \r\n        suggestion.area.toLowerCase().includes(query)\r\n    );\r\n    \r\n    // Sort suggestions to prioritize exact matches\r\n    filteredSuggestions.sort((a, b) => {\r\n      const aNameMatch = a.name.toLowerCase().includes(query);\r\n      const bNameMatch = b.name.toLowerCase().includes(query);\r\n      \r\n      if (aNameMatch && !bNameMatch) return -1;\r\n      if (!aNameMatch && bNameMatch) return 1;\r\n      return 0;\r\n    });\r\n    \r\n    setSuggestions(filteredSuggestions);\r\n  }, [searchQuery]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    performSearch();\r\n  };\r\n\r\n  const performSearch = (parkingId) => {\r\n    // If a specific parking ID is provided, go directly to that parking\r\n    if (parkingId) {\r\n      navigate(`/parking/${parkingId}`);\r\n      setSearchQuery('');\r\n      setShowSuggestions(false);\r\n      return;\r\n    }\r\n    \r\n    // Special case for R-City Mall\r\n    if (searchQuery.toLowerCase().includes('rcity') || searchQuery.toLowerCase().includes('r-city')) {\r\n      navigate('/parking/rcity_mall');\r\n      setSearchQuery('');\r\n      setShowSuggestions(false);\r\n      return;\r\n    }\r\n    \r\n    // Otherwise, go to the nearby malls page with the search query\r\n    if (searchQuery.trim()) {\r\n      navigate(`/nearby-malls?q=${encodeURIComponent(searchQuery.trim())}`);\r\n      setSearchQuery('');\r\n      setShowSuggestions(false);\r\n    } else {\r\n      // If search is empty, just go to the nearby malls page\r\n      navigate('/nearby-malls');\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (parkingId) => {\r\n    performSearch(parkingId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative w-full\" ref={suggestionsRef}>\r\n      <form \r\n        onSubmit={handleSubmit} \r\n        className={`flex items-center relative ${className}`}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Find nearest parking... (e.g. R-City Mall)\"\r\n          value={searchQuery}\r\n          onChange={(e) => {\r\n            setSearchQuery(e.target.value);\r\n            setShowSuggestions(true);\r\n          }}\r\n          onFocus={() => setShowSuggestions(true)}\r\n          className=\"form-input pr-10 py-1.5 text-sm w-full\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"absolute right-2 text-gray-400 hover:text-gray-600\"\r\n          aria-label=\"Search\"\r\n        >\r\n          <MagnifyingGlassIcon className=\"h-5 w-5\" />\r\n        </button>\r\n      </form>\r\n      \r\n      {/* Suggestions dropdown */}\r\n      {showSuggestions && suggestions.length > 0 && (\r\n        <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto\">\r\n          <ul>\r\n            {suggestions.map((suggestion) => (\r\n              <li \r\n                key={suggestion.id}\r\n                className={`px-4 py-2 hover:bg-yellow-50 cursor-pointer ${suggestion.highlighted ? 'bg-yellow-50' : ''}`}\r\n                onClick={() => handleSuggestionClick(suggestion.id)}\r\n              >\r\n                <div className=\"font-medium\">{suggestion.name}</div>\r\n                <div className=\"text-xs text-gray-500\">{suggestion.area}</div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,mBAAmB,KAAQ,6BAA6B,CAEjE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,mBAAmB,CAAG,CAC1B,CAAEC,EAAE,CAAE,YAAY,CAAEC,IAAI,CAAE,qBAAqB,CAAEC,IAAI,CAAE,WAAW,CAAEC,WAAW,CAAE,IAAK,CAAC,CACvF,CAAEH,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,wBAAwB,CAAEC,IAAI,CAAE,YAAa,CAAC,CAChE,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,uBAAuB,CAAEC,IAAI,CAAE,cAAe,CAAC,CACjE,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,yBAAyB,CAAEC,IAAI,CAAE,OAAQ,CAAC,CAC5D,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,uBAAuB,CAAEC,IAAI,CAAE,QAAS,CAAC,CAC3D,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,qBAAqB,CAAEC,IAAI,CAAE,WAAY,CAAC,CAC5D,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,uBAAuB,CAAEC,IAAI,CAAE,YAAa,CAAC,CAC/D,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,4BAA4B,CAAEC,IAAI,CAAE,YAAa,CAAC,CACpE,CAAEF,EAAE,CAAE,IAAI,CAAEC,IAAI,CAAE,sBAAsB,CAAEC,IAAI,CAAE,YAAa,CAAC,CAC/D,CAED,KAAM,CAAAE,SAAS,CAAGC,IAAA,EAAwB,IAAvB,CAAEC,SAAS,CAAG,EAAG,CAAC,CAAAD,IAAA,CACnC,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACqB,eAAe,CAAEC,kBAAkB,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAAuB,cAAc,CAAGrB,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAsB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9B;AACAF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwB,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIH,cAAc,CAACI,OAAO,EAAI,CAACJ,cAAc,CAACI,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAC5EP,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CAEDQ,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACAxB,SAAS,CAAC,IAAM,CACd,GAAIgB,WAAW,CAACgB,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC7Bb,cAAc,CAAC,EAAE,CAAC,CAClB,OACF,CAEA,KAAM,CAAAc,KAAK,CAAGjB,WAAW,CAACkB,WAAW,CAAC,CAAC,CAEvC;AACA,GAAID,KAAK,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAIF,KAAK,CAACE,QAAQ,CAAC,QAAQ,CAAC,CAAE,CACvD,KAAM,CAAAC,gBAAgB,CAAG5B,mBAAmB,CAAC6B,MAAM,CACjDC,UAAU,EAAIA,UAAU,CAAC5B,IAAI,CAACwB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAC/D,CAAC,CACDhB,cAAc,CAACiB,gBAAgB,CAAC,CAChC,OACF,CAEA,KAAM,CAAAG,mBAAmB,CAAG/B,mBAAmB,CAAC6B,MAAM,CACpDC,UAAU,EACRA,UAAU,CAAC5B,IAAI,CAACwB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACF,KAAK,CAAC,EAC7CK,UAAU,CAAC3B,IAAI,CAACuB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACF,KAAK,CAChD,CAAC,CAED;AACAM,mBAAmB,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CACjC,KAAM,CAAAC,UAAU,CAAGF,CAAC,CAAC/B,IAAI,CAACwB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACF,KAAK,CAAC,CACvD,KAAM,CAAAW,UAAU,CAAGF,CAAC,CAAChC,IAAI,CAACwB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACF,KAAK,CAAC,CAEvD,GAAIU,UAAU,EAAI,CAACC,UAAU,CAAE,MAAO,CAAC,CAAC,CACxC,GAAI,CAACD,UAAU,EAAIC,UAAU,CAAE,MAAO,EAAC,CACvC,MAAO,EAAC,CACV,CAAC,CAAC,CAEFzB,cAAc,CAACoB,mBAAmB,CAAC,CACrC,CAAC,CAAE,CAACvB,WAAW,CAAC,CAAC,CAEjB,KAAM,CAAA6B,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBC,aAAa,CAAC,CAAC,CACjB,CAAC,CAED,KAAM,CAAAA,aAAa,CAAIC,SAAS,EAAK,CACnC;AACA,GAAIA,SAAS,CAAE,CACb1B,QAAQ,CAAC,YAAY0B,SAAS,EAAE,CAAC,CACjChC,cAAc,CAAC,EAAE,CAAC,CAClBI,kBAAkB,CAAC,KAAK,CAAC,CACzB,OACF,CAEA;AACA,GAAIL,WAAW,CAACkB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAInB,WAAW,CAACkB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAAE,CAC/FZ,QAAQ,CAAC,qBAAqB,CAAC,CAC/BN,cAAc,CAAC,EAAE,CAAC,CAClBI,kBAAkB,CAAC,KAAK,CAAC,CACzB,OACF,CAEA;AACA,GAAIL,WAAW,CAACgB,IAAI,CAAC,CAAC,CAAE,CACtBT,QAAQ,CAAC,mBAAmB2B,kBAAkB,CAAClC,WAAW,CAACgB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CACrEf,cAAc,CAAC,EAAE,CAAC,CAClBI,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,IAAM,CACL;AACAE,QAAQ,CAAC,eAAe,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAA4B,qBAAqB,CAAIF,SAAS,EAAK,CAC3CD,aAAa,CAACC,SAAS,CAAC,CAC1B,CAAC,CAED,mBACE1C,KAAA,QAAKQ,SAAS,CAAC,iBAAiB,CAACqC,GAAG,CAAE9B,cAAe,CAAA+B,QAAA,eACnD9C,KAAA,SACE+C,QAAQ,CAAET,YAAa,CACvB9B,SAAS,CAAE,8BAA8BA,SAAS,EAAG,CAAAsC,QAAA,eAErDhD,IAAA,UACEkD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,4CAA4C,CACxDC,KAAK,CAAEzC,WAAY,CACnB0C,QAAQ,CAAGZ,CAAC,EAAK,CACf7B,cAAc,CAAC6B,CAAC,CAAClB,MAAM,CAAC6B,KAAK,CAAC,CAC9BpC,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,CACFsC,OAAO,CAAEA,CAAA,GAAMtC,kBAAkB,CAAC,IAAI,CAAE,CACxCN,SAAS,CAAC,wCAAwC,CACnD,CAAC,cACFV,IAAA,WACEkD,IAAI,CAAC,QAAQ,CACbxC,SAAS,CAAC,oDAAoD,CAC9D,aAAW,QAAQ,CAAAsC,QAAA,cAEnBhD,IAAA,CAACF,mBAAmB,EAACY,SAAS,CAAC,SAAS,CAAE,CAAC,CACrC,CAAC,EACL,CAAC,CAGNK,eAAe,EAAIF,WAAW,CAAC0C,MAAM,CAAG,CAAC,eACxCvD,IAAA,QAAKU,SAAS,CAAC,uGAAuG,CAAAsC,QAAA,cACpHhD,IAAA,OAAAgD,QAAA,CACGnC,WAAW,CAAC2C,GAAG,CAAEvB,UAAU,eAC1B/B,KAAA,OAEEQ,SAAS,CAAE,+CAA+CuB,UAAU,CAAC1B,WAAW,CAAG,cAAc,CAAG,EAAE,EAAG,CACzGkD,OAAO,CAAEA,CAAA,GAAMX,qBAAqB,CAACb,UAAU,CAAC7B,EAAE,CAAE,CAAA4C,QAAA,eAEpDhD,IAAA,QAAKU,SAAS,CAAC,aAAa,CAAAsC,QAAA,CAAEf,UAAU,CAAC5B,IAAI,CAAM,CAAC,cACpDL,IAAA,QAAKU,SAAS,CAAC,uBAAuB,CAAAsC,QAAA,CAAEf,UAAU,CAAC3B,IAAI,CAAM,CAAC,GALzD2B,UAAU,CAAC7B,EAMd,CACL,CAAC,CACA,CAAC,CACF,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAI,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}